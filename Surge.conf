[General]
# author:Edward
# date:2024.07
# Version:1.1

# --- GENERAL ---
# > éšè—çŠ¶æ€æ ä¸Šçš„ VPN å›¾æ ‡
# hide-vpn-icon = true

# > Enhanced Wi-Fi Assist
wifi-assist = true

# > All Hybrid ç½‘ç»œå¹¶å‘
all-hybrid = false

# > æ¸¸æˆä¼˜åŒ–
// å¼€å¯åå°†åœ¨ç³»ç»Ÿè´Ÿè½½éå¸¸é«˜ï¼Œæ•°æ®åŒ…å¤„ç†å‡ºç°å»¶è¿Ÿæ—¶ï¼Œä¼˜å…ˆå¤„ç† UDP æ•°æ®åŒ…ã€‚
udp-priority = true

# > Internet æµ‹è¯• URL
internet-test-url = http://bing.com

# > ä»£ç†æµ‹é€Ÿ URL
proxy-test-url = http://cp.cloudflare.com/generate_204

# > æµ‹è¯•è¶…æ—¶ï¼ˆç§’ï¼‰
test-timeout = 5

# > GeoIPæ•°æ®åº“
geoip-maxmind-url = https://gitlab.com/Masaiki/GeoIP2-CN/-/raw/release/Country.mmdb

# > ç¦ç”¨ GEOIP è‡ªåŠ¨æ›´æ–°
disable-geoip-db-auto-update = false

# > IPv6æ”¯æŒ
// å¼€å¯ IPv6 ä¼šè®© Surge åŒæ—¶è¯·æ±‚åŸŸåçš„ A ä¸ AAAA è®°å½•ï¼Œè¿™å¯èƒ½ç•¥å¾®çš„å¢åŠ å»¶è¿Ÿã€‚è‹¥ DNS æœåŠ¡å™¨æ— æ³•æ­£ç¡®å“åº” AAAA æŸ¥è¯¢ï¼Œåˆ™å¯èƒ½å¯¼è‡´ä¸¥é‡çš„å¡é¡¿ï¼Œä»…åœ¨éœ€è¦æ—¶å¼€å¯ã€‚
ipv6 = true
ipv6-vif = auto
include-all-networks = false

# --- Wi-Fi ACCESS ---
# > å…è®¸Wi-Fiè®¿é—®
// Surge å¯ä»¥ä½œä¸ºä¸€ä¸ªæ ‡å‡†çš„ HTTP/SOCKS5 ä»£ç†æœåŠ¡å™¨å‘ wi-Fi ç½‘ç»œä¸‹çš„å…¶ä»–è®¾å¤‡æä¾›æœåŠ¡å™¨
allow-wifi-access = true

# > Surge iOS - é»˜è®¤ HTTP ç«¯å£å·ï¼š6152ï¼ŒSOCKS5 ç«¯å£å·ï¼š6153
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153

# > Surge Mac - é»˜è®¤ HTTP ç«¯å£å·ï¼š6152ï¼ŒSOCKS5 ç«¯å£å·ï¼š6153
http-listen = 0.0.0.0:6152
socks5-listen = 0.0.0.0:6153

# > å…è®¸çƒ­ç‚¹å…±äº«
allow-hotspot-access = true

# --- REMOTE CONTROLLER ---
# > å…è®¸ Surge è¯·æ±‚æŸ¥çœ‹å™¨æˆ– Surge CLI è¿›è¡Œç®¡ç†æ§åˆ¶
// é»˜è®¤ä»…å…è®¸å¤–éƒ¨æ§åˆ¶å™¨é€šè¿‡ USB è¿›è¡Œæ§åˆ¶ã€‚å¦‚æœæƒ³è¦å…è®¸ç”± Wi-Fi æ§åˆ¶å¯ä»¥å°† 127.0.0.1 æ”¹ä¸º 0.0.0.0
external-controller-access = key@127.0.0.1:6160

# > è¿œç¨‹æ§åˆ¶å™¨
// This option allows using HTTP APIs to control
http-api = key@127.0.0.1:6166
// ä½¿ç”¨ HTTPS æ›¿ä»£ HTTP åè®®ï¼Œéœ€è¦å…ˆé…ç½® MitM çš„ CA è¯ä¹¦ï¼ŒåŒæ—¶éœ€è¦åœ¨å®¢æˆ·ç«¯è®¾å¤‡ä¸Šæ‰‹åŠ¨å®‰è£…å¹¶ä¿¡ä»» CA è¯ä¹¦
http-api-tls = false
// å¼€å¯è¯¥é€‰é¡¹åå¯ä»¥é€šè¿‡æµè§ˆå™¨æ§åˆ¶ Surgeï¼Œæœ¬æœºæµè§ˆå™¨è¾“å…¥127.0.0.1:6166
http-api-web-dashboard = true

# --- COMPATIBILITY ---
// è¯¥é€‰é¡¹å°†ä½¿å¾—å‘å¾€è¿™äº›åŸŸåæˆ–è€… IP æ®µçš„è¯·æ±‚ç”± Surge VIF è¿›è¡Œå¤„ç†ï¼ˆè€Œä¸æ˜¯ Surge Proxy)ï¼Œè¯¥é€‰é¡¹ç”¨äºä¿®æ­£å’ŒæŸäº›åº”ç”¨çš„å…¼å®¹æ€§é—®é¢˜
// å…¼å®¹æ¨¡å¼
// 0ï¼šç¦ç”¨
// 1ï¼šProxy with Loopback Address
// 2ï¼šProxy Only
// 3ï¼šVIF Only
// 4ï¼šVIF Proxyï¼šä¸ä½¿ç”¨ 127.0.0.1 çš„å›ç¯åœ°å€ä½œä¸ºä»£ç†ï¼Œä½¿ç”¨ VIF çš„è™šæ‹Ÿä»£ç†åœ°å€ï¼Œå°†äº§ç”Ÿé¢å¤–çš„æ€§èƒ½å¼€é”€
// 5ï¼šä¸ä½œä¸ºé»˜è®¤è·¯ç”±ï¼šä¸å£°æ˜ä¸ºé»˜è®¤è·¯ç”±ï¼Œä½†å£°æ˜è‹¥å¹²ä¸ªå°è·¯ç”±ä»¥è¦†ç›–æ‰€æœ‰åœ°å€ï¼ˆä¸ Surge Mac å¢å¼ºæ¨¡å¼è¡Œä¸ºç›¸åŒï¼‰
// è¿™ç§é…ç½®ä¸‹ç”±äº VIF ä¸æ˜¯ä¸»ç½‘ç»œè®¾å¤‡æ— æ³•é…ç½®ç³»ç»Ÿä»£ç†ã€‚éƒ¨åˆ†åº”ç”¨åœ¨è¯¥æ¨¡å¼ä¸‹ä¼šè®¤ä¸º VPN æœªå¼€å¯ä»¥è§£å†³ç‰¹æ®Šå…¼å®¹æ€§é—®é¢˜ï¼Œå¦‚ HomeKit Security Camera

# âš ï¸ è¯·ä»…åœ¨æŒ‡å¼•ä¸‹ä½¿ç”¨ï¼Œå¼€å¯åéƒ¨åˆ†åŠŸèƒ½å¯èƒ½æ— æ³•ä½¿ç”¨
skip-proxy = 192.168.0.0/24, 10.0.0.0/8, 172.16.0.0/12, 127.0.0.1, localhost, *.local
# > è·³è¿‡ä»£ç†
exclude-simple-hostnames = true
# > æ’é™¤ç®€å•ä¸»æœºå
dns-server = 119.29.29.29, 223.5.5.5

# --- DNS ---
# > DNSæœåŠ¡å™¨
hijack-dns = 8.8.8.8:53, 8.8.4.4:53
// dns-server = 223.5.5.5, 114.114.114.114
read-etc-hosts = true
# > ä» /etc/hosts è¯»å– DNS è®°å½•
doh-skip-cert-verification = true

# > ENCRYPTED DNS
// å¦‚æœé…ç½®äº†åŠ å¯† DNSï¼Œä¼ ç»Ÿ DNS å°†ä»…ç”¨ä½œè§£æ DOH åŸŸåå’Œæµ‹è¯•ç½‘ç»œè¿é€šæ€§
// æ”¯æŒçš„åè®®ï¼š
// DNS over HTTPS: https://doh.pub/dns-query
// DNS over HTTP/3: h3://example.com
// DNS over QUIC: quic://example.com
// encrypted-dns-server = https://223.5.5.5/ // é™¤éå½“åœ° ISP æœ‰ä¸¥é‡çš„ DNS æ±¡æŸ“é—®é¢˜ï¼Œå¦åˆ™æ²¡å¿…è¦å¼€å¯ DoHï¼Œä¼ ç»Ÿ DNS çš„æ€§èƒ½æœ€ä¼˜ï¼Œç½‘ç»œå¼‚å¸¸åæ¢å¤é€Ÿåº¦æœ€å¿«
use-local-host-item-for-proxy = true
// ä¸´æ—¶å…³é—­ DOH çš„æœåŠ¡ç«¯è¯ä¹¦éªŒè¯ï¼ˆè§£å†³ Surge æ— æ³•ä¸ nextdns.io å®Œæˆ TLS æ¡æ‰‹é—®é¢˜ï¼‰

# > ä»£ç†è¯·æ±‚æœ¬åœ° DNS æ˜ å°„
// å¼€å¯è¯¥é€‰é¡¹åï¼Œå¦‚æœè®¿é—®çš„åŸŸåé…ç½®æœ‰æœ¬åœ° DNS æ˜ å°„ï¼Œsurge å°†ä½¿ç”¨æœ¬åœ° IP åœ°å€è¿›è¡Œè¯·æ±‚ï¼Œä¸åœ¨è¿œç«¯è¿›è¡Œè§£æã€‚ä»…å¯¹é…ç½®äº† IP åœ°å€çš„æœ¬åœ° DNS æ˜ å°„ç”Ÿæ•ˆ
encrypted-dns-follow-outbound-mode = false

# > ä½¿åŠ å¯† DNS è¯·æ±‚é€šè¿‡ä»£ç†ç­–ç•¥æ‰§è¡Œ
include-local-networks = false

# --- ROUTING ---
# > åŒ…å«æ‰€æœ‰ç½‘ç»œè¯·æ±‚
loglevel = notify
# > åŒ…å«æœ¬åœ°ç½‘ç»œè¯·æ±‚
show-error-page-for-reject = true

# --- ADVANCED ---
# > æ—¥å¿—çº§åˆ«
always-real-ip = link-ip.nextdns.io, *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com

# > å½“é‡åˆ° REJECT ç­–ç•¥æ—¶è¿”å›é”™è¯¯é¡µ
force-http-engine-hosts = *.ott.cibntv.net, 123.59.31.1,119.18.193.135, 122.14.246.33, 175.102.178.52, 116.253.24.*, 175.6.26.*, 220.169.153.*

# > Always Real IP Hosts
// å½“ Surge VIF å¤„ç† DNS é—®é¢˜æ—¶ï¼Œæ­¤é€‰é¡¹è¦æ±‚ Surge è¿”å›ä¸€ä¸ªçœŸæ­£çš„ IP åœ°å€ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª Fake IP
// DNS æ•°æ®åŒ…å°†è¢«è½¬å‘åˆ°ä¸Šæ¸¸ DNS æœåŠ¡å™¨
// ä¾‹å¦‚ç”±äºæ¸¸æˆä¸»æœºä¼šä½¿ç”¨ STUN æŠ€æœ¯è¿›è¡Œ NAT ç©¿é€ï¼Œéœ€è¦è¿›è¡Œä¸€äº›é¢å¤–çš„é…ç½®æ‰èƒ½æ­£å¸¸å·¥ä½œ
use-default-policy-if-wifi-not-primary = false

# > Hijack DNS
// é»˜è®¤æƒ…å†µä¸‹ï¼ŒSurge åªå¯¹å‘é€åˆ° Surge DNS åœ°å€(198.18.0.2)çš„ DNS æŸ¥è¯¢è¿”å› Fack IP åœ°å€ã€‚å‘é€åˆ°æ ‡å‡† DNS çš„æŸ¥è¯¢å°†è¢«è½¬å‘
// å¦‚ Google ç³»æ™ºèƒ½ç¡¬ä»¶äº§å“ä¼šæ— è§† DHCP é…ç½®å¼ºè¡Œä½¿ç”¨ 8.8.8.8 å’Œ 8.8.4.4ï¼Œéœ€è¦é…ç½® Surge å¼ºè¡ŒåŠ«æŒæ‰å¯ä»¥æ­£å¸¸å·¥ä½œ
udp-policy-not-supported-behaviour = REJECT

# > TCP Force HTTP Hosts
// ä½¿ Surge å°† TCP è¿æ¥è§†ä¸º HTTP è¯·æ±‚ã€‚Surge HTTP å¼•æ“å°†å¤„ç†è¯·æ±‚ï¼Œå¹¶ä¸”æ‰€æœ‰é«˜çº§åŠŸèƒ½éƒ½å°†å¯ç”¨ï¼Œå¦‚æˆªå–ã€é‡å†™å’Œè„šæœ¬
// æ”¯æŒé€šé…ç¬¦ * åŠ ?ï¼›
// ä½¿ç”¨å‰ç¼€ - æ’é™¤ä¸»æœºåï¼›
// é»˜è®¤æƒ…å†µä¸‹ï¼Œåªå¯¹ 80 ç«¯å£çš„è¯·æ±‚è¿›è¡Œå¤„ç†ï¼ˆä½¿ç”¨ example.com:443 æŒ‡å®šç«¯å£æˆ– example.com:0 è¡¨ç¤ºæ‰€æœ‰ç«¯å£ï¼‰ï¼›
// <ip-address> è¡¨ç¤ºåŒ¹é…æ‰€æœ‰ä¸»æœºåä¸º IP åœ°å€çš„è¿æ¥ï¼›
// <ipv4-address> è¡¨ç¤ºåŒ¹é…æ‰€æœ‰ä¸»æœºåä¸º IPv4 åœ°å€çš„è¿æ¥ï¼›
// <ipv6-address> è¡¨ç¤ºåŒ¹é…æ‰€æœ‰ä¸»æœºåä¸º IPv6 åœ°å€çš„è¿æ¥ã€‚

# > VIF Excluded Routes
// tun-excluded-routes = 239.255.255.250/32

# > VIF Included Routes
// tun-included-routes = 192.168.1.12/32

# > å½“ Wi-Fi ä¸æ˜¯é¦–é€‰ç½‘ç»œæ—¶ SSID ç»„ç­–ç•¥ä½¿ç”¨é»˜è®¤ç­–ç•¥

# > æ§åˆ¶å½“ UDP æµé‡è¢«åŒ¹é…åˆ°ä¸€ä¸ªä¸æ”¯æŒ UDP è½¬å‘çš„ç­–ç•¥æ—¶çš„è¡Œä¸º
// DIRECTï¼šå›é€€åˆ° DIRECT ç­–ç•¥ï¼ˆé»˜è®¤ï¼‰
// REJECTï¼šå›é€€åˆ° REJECT ç­–ç•¥

[Proxy Group]
# > ç­–ç•¥ç»„ï¼ˆä¸‹é¢çš„èŠ‚ç‚¹ä¿¡æ¯éœ€ä¸å¤–éƒ¨èŠ‚ç‚¹å¯¹åº”ï¼Œè‹¥åˆ é™¤äº†å¤–éƒ¨èŠ‚ç‚¹é‡Œçš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨ç­–ç•¥ç»„é‡Œä¹Ÿè¦åˆ é™¤ã€‚ï¼‰
Google = url-test, no-alert=1, hidden=0, include-all-proxies=0, include-other-group=ç¾å›½
Google Voice = url-test, no-alert=1, hidden=0, include-all-proxies=0, include-other-group=ç¾å›½
Facebook = smart, no-alert=1, hidden=1, include-all-proxies=0, include-other-group=ç¾å›½
WhatsApp = smart, no-alert=1, hidden=1, include-all-proxies=0, include-other-group=ç¾å›½
swiftgram = smart, no-alert=1, hidden=0, include-all-proxies=0, include-other-group=æ–°åŠ å¡
X = smart, no-alert=1, hidden=0, include-all-proxies=0, include-other-group=ç¾å›½
OpenAI = smart, no-alert=1, hidden=0, include-all-proxies=0, include-other-group=æ–°åŠ å¡
YouTube = url-test, no-alert=1, hidden=0, include-all-proxies=0, include-other-group=ç¾å›½
Disney+ = smart, no-alert=1, hidden=1, include-all-proxies=0, include-other-group=æ–°åŠ å¡
# > å¼•ç”¨èŠ‚ç‚¹
Netflix = smart, no-alert=1, hidden=1, include-all-proxies=0, include-other-group=æ–°åŠ å¡
Max = smart, no-alert=1, hidden=1, include-all-proxies=0, include-other-group=ç¾å›½
Spotify = smart, no-alert=1, hidden=0, include-all-proxies=0, include-other-group=ç¾å›½
TikTok = smart, no-alert=1, hidden=0, include-all-proxies=0, include-other-group=ç¾å›½
å¤šé‚»å›½ = smart, no-alert=1, hidden=0, include-all-proxies=0, include-other-group=ä¸€é”®ç›´è¿
æœºåœºåç§° = smart, policy-path=æœºåœºé“¾æ¥, update-interval=43200, no-alert=0, hidden=1, include-all-proxies=0
# > èŠ‚ç‚¹ç­›é€‰
æœºåœºåç§°2 = smart, policy-path=æœºåœºé“¾æ¥, update-interval=43200, no-alert=0, hidden=1, include-all-proxies=0, policy-regex-filter=^(?!.*(ç›´è¿|å…¬ç›Š)).*(AWS|ç§»åŠ¨|è”é€š|é¦™æ¸¯|å°æ¹¾|éŸ©å›½|æ–°åŠ å¡|é©¬æ¥è¥¿äºš|ç¾å›½|è‹±å›½|æ³•å›½)
ç¾å›½ = smart, update-interval=43200, policy-regex-filter=^(?!.*(å®¶å®½|æ˜Ÿé“¾)).*(ç¾å›½), no-alert=1, hidden=1, include-all-proxies=0, include-other-group=æœºåœºåç§°
é¦™æ¸¯ = smart, update-interval=43200, policy-regex-filter=^(?!.*(é¦™æ¸¯å®¶å®½|é¦™æ¸¯æ¸¸æˆ)).*(é¦™æ¸¯), no-alert=1, hidden=1, include-all-proxies=0, include-other-group=æœºåœºåç§°
æ–°åŠ å¡ = smart, update-interval=43200, policy-regex-filter=^(?!.*æ–°åŠ å¡å®¶å®½).*(æ–°åŠ å¡), no-alert=1, hidden=1, include-all-proxies=0, include-other-group=æœºåœºåç§°

# > è§„åˆ™è®¾ç½®
æ–°åŠ å¡å®¶å®½ = smart, policy-regex-filter=æ–°åŠ å¡å®¶å®½, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=æœºåœºåç§°
æ—¥æœ¬ = smart, update-interval=43200, policy-regex-filter=(ğŸ‡¯ğŸ‡µ)|(Japan)|(JP)|(æ—¥æœ¬), no-alert=1, hidden=1, include-all-proxies=0, include-other-group=æœºåœºåç§°
è‹±å›½ = smart, policy-regex-filter=^(?!.*è‹±å›½å®¶å®½).*(è‹±å›½), no-alert=0, hidden=1, include-all-proxies=0, include-other-group=æœºåœºåç§°
æ¸¸æˆå¹³å° = smart, no-alert=1, hidden=1, include-all-proxies=0, include-other-group=ç¾å›½
æ¼ç½‘ä¹‹é±¼ = smart, no-alert=1, hidden=1, include-all-proxies=0, include-other-group=ç¾å›½
ä¸€é”®ç›´è¿ = select, DIRECT, no-alert=0, hidden=1, include-all-proxies=0
ä¸€é”®å…¨å±€ = smart, no-alert=1, hidden=1, include-all-proxies=0, include-other-group=ç¾å›½å®¶å®½

[Rule]
# > æœ¬åœ°è§„åˆ™
// é˜²æ­¢åº”ç”¨å¾ªç¯è¯·æ±‚
IP-CIDR,0.0.0.0/32,REJECT,no-resolve
// Added for: gateway.icloud.com:443
DOMAIN-SUFFIX,gateway.icloud.com,DIRECT,extended-matching
DOMAIN-SUFFIX,hok.qq.com,DIRECT,extended-matching
// èŠ‚ç‚¹æµ‹é€Ÿ
DOMAIN,ip-api.com,ç¾å›½
// Safari é˜²è·³è½¬
DOMAIN,app-site-association.cdn-apple.com,REJECT
// ğŸ†• æ‹’ç»å›½å®¶åè¯ˆä¸­å¿ƒè¯·æ±‚
DOMAIN,prpr.96110.cn.com,DIRECT
DOMAIN-KEYWORD,96110,REJECT
DOMAIN-SUFFIX,gjfzpt.cn,REJECT

# > è¿œç¨‹è§„åˆ™
// è§„åˆ™è½¬æ¢
RULE-SET,http://script.hub/file/_start_/https://raw.githubusercontent.com/RuCu6/QuanX/main/Rules/MyBlockAds.list/_end_/qx_RuCu6_MyBlockAds.list?type=rule-set&target=surge-rule-set&x=mall.bilibili.com%2Bpassport.bilibili.com&del=true&nore=true&sni=httpdns%2B163,REJECT,update-interval=43200,no-resolve,extended-matching
// Adrules
RULE-SET,https://adrules.top/adrules.list,REJECT,update-interval=43200,no-resolve,extended-matching
// Apple Servers
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple_All_No_Resolve.list,DIRECT,update-interval=43200,no-resolve,extended-matching
// BiliBili
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/BiliBili/BiliBili.list,DIRECT,update-interval=43200,no-resolve,extended-matching
// TikTok
RULE-SET,https://raw.githubusercontent.com/Semporia/TikTok-Unlock/master/Surge/TikTok.list,TikTok,update-interval=43200,no-resolve,extended-matching
// 1password
RULE-SET,https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Rule/1PasswordUS.list,ç¾å›½,update-interval=43200,no-resolve,extended-matching
// Talktone
RULE-SET,https://raw.githubusercontent.com/mottzz87/crules/main/rule/talkatone.list,DIRECT,update-interval=43200,no-resolve,extended-matching
// ç½‘æ˜“
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/NetEase/NetEase.list,DIRECT,update-interval=43200,no-resolve,extended-matching
// WeChat
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/WeChat/WeChat.list,DIRECT,update-interval=43200,no-resolve,extended-matching
// Kingsoft
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Kingsoft/Kingsoft.list,DIRECT,update-interval=43200,no-resolve,extended-matching
// WhatsApp
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Whatsapp/Whatsapp.list,WhatsApp,update-interval=43200,no-resolve,extended-matching
// å¤šé‚»å›½
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Duolingo/Duolingo.list,å¤šé‚»å›½,update-interval=43200,no-resolve,extended-matching
// ç»´åŸºç™¾ç§‘
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Wikipedia/Wikipedia.list,ç¾å›½,update-interval=43200,no-resolve,extended-matching
// X
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Twitter/Twitter.list,X,update-interval=43200,no-resolve,extended-matching
// Testflight
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@release/rule/Surge/TestFlight/TestFlight.list,DIRECT,update-interval=43200,no-resolve,extended-matching
// Spotify
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Spotify/Spotify.list,Spotify,update-interval=43200,no-resolve,extended-matching
// Speedtest
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Speedtest/Speedtest.list,DIRECT,update-interval=43200,no-resolve,extended-matching
// Instagram
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Instagram/Instagram.list,ç¾å›½,update-interval=43200,no-resolve,extended-matching
// Google
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GoogleSearch/GoogleSearch.list,Google,update-interval=43200,no-resolve,extended-matching
// GoogleVoice
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/GoogleVoice/GoogleVoice.list,Google Voice,update-interval=43200,no-resolve,extended-matching
// GitHub
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/GitHub/GitHub.list,ç¾å›½,update-interval=43200,no-resolve,extended-matching
// Discord
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Discord/Discord.list,ç¾å›½,update-interval=43200,no-resolve,extended-matching
// Bing
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Bing/Bing.list,ç¾å›½,update-interval=43200,no-resolve,extended-matching
// Copilot
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Copilot/Copilot.list,ç¾å›½,update-interval=43200,no-resolve,extended-matching
// Gemini
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Gemini/Gemini.list,ç¾å›½,update-interval=43200,no-resolve,extended-matching
// OpenAI
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/OpenAI/OpenAI.list,OpenAI,update-interval=43200,no-resolve,extended-matching
// å¾®è½¯æœåŠ¡
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Microsoft/Microsoft.list,ç¾å›½,update-interval=43200,no-resolve,extended-matching
// Facebook
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Facebook/Facebook.list,Facebook,update-interval=43200,no-resolve,extended-matching
// Telegram
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/TelegramSG/TelegramSG.list,swiftgram,update-interval=43200,no-resolve,extended-matching
// æ¸¸æˆå¹³å°
RULE-SET,https://gitlab.com/lodepuly/vpn_tool/-/raw/master/Tool/Loon/Rule/ChinaDownloadCDN.list,æ¸¸æˆå¹³å°,update-interval=43200,no-resolve,extended-matching
// YouTube
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list,YouTube,update-interval=43200,no-resolve,extended-matching
// å›½å†…ç½‘ç«™ç›´è¿
RULE-SET,https://ruleset.skk.moe/List/non_ip/domestic.conf,DIRECT,update-interval=43200,no-resolve,extended-matching
// å›½å¤–ç½‘ç«™åˆ†æµ
RULE-SET,https://ruleset.skk.moe/List/non_ip/global.conf,ç¾å›½,update-interval=43200,no-resolve,extended-matching
// Roit æ¸¸æˆåˆ†æµè§„åˆ™
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Riot/Riot.list,DIRECT,no-resolve,extended-matching
// Disney+
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Disney/Disney.list,Disney+,update-interval=43200,no-resolve,extended-matching
// PayPal
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/PayPal/PayPal.list,ç¾å›½,update-interval=43200,no-resolve,extended-matching
// HBO
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/HBO/HBO.list,Max,update-interval=43200,no-resolve,extended-matching
// Hulu
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Hulu/Hulu.list,ç¾å›½,update-interval=43200,no-resolve,extended-matching
// Netflix
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Netflix/Netflix.list,Netflix,update-interval=43200,no-resolve,extended-matching
// Local Area Network å±€åŸŸç½‘
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Lan/Lan.list,DIRECT,update-interval=43200,extended-matching
// å±€åŸŸç½‘åœ°å€
RULE-SET,LAN,DIRECT
// ASN China
RULE-SET,https://raw.githubusercontent.com/VirgilClyne/GetSomeFries/master/ruleset/ASN.China.list,DIRECT,update-interval=43200,no-resolve,extended-matching
// å…œåº•è§„åˆ™
FINAL,æ¼ç½‘ä¹‹é±¼,dns-failed

[Host]
*.taobao.com = server:223.5.5.5
*.tmall.com = server:223.5.5.5
*.alipay.com = server:223.5.5.5
*.alicdn.com = server:223.5.5.5
*.aliyun.com = server:223.5.5.5
*.jd.com = server:119.28.28.28
*.qq.com = server:119.28.28.28
*.tencent.com = server:119.28.28.28
*.weixin.com = server:119.28.28.28
*.bilibili.com = server:119.29.29.29
hdslb.com = server:119.29.29.29
*.163.com = server:119.29.29.29
*.126.com = server:119.29.29.29
*.126.net = server:119.29.29.29
*.127.net = server:119.29.29.29
*.netease.com = server:119.29.29.29
*.mi.com = server:119.29.29.29
*.xiaomi.com = server:119.29.29.29
*testflight.apple.com = server:8.8.4.4

# Firebase Cloud Messaging
# mtalk.google.com = 108.177.125.188

# Google Dl
# dl.google.com = server:119.29.29.29
# dl.l.google.com = server:119.29.29.29
# update.googleapis.com = server:119.29.29.29

# Router Admin Panel
# CUSTOM HOST

# è¯¥æ®µå®šä¹‰é’ˆå¯¹ HTTP è¯·æ±‚çš„ URL é‡å®šå‘è§„åˆ™
# æœ‰ä¸¤ç§é‡å®šå‘æ–¹å¼: "header" å’Œ "302"
# 
# Header æ¨¡å¼
# Surge ä¼šä¿®æ”¹å‘å‡ºçš„ http headerï¼Œå¿…è¦æ—¶è¿˜ä¼šä¿®æ”¹ Host å­—æ®µã€‚å®¢æˆ·ç«¯å°†
# æ„ŸçŸ¥ä¸åˆ°è¿™ä¸ªé‡å®šå‘è¿‡ç¨‹. ä¸æ”¯æŒé‡å®šå‘åˆ°ä¸€ä¸ª HTTPS çš„åœ°å€ã€‚
# 
# 302 æ¨¡å¼
# Surge ç›´æ¥ç®€å•çš„è¿”å›ä¸€ä¸ª 302 é‡å®šå‘å›åº”ã€‚

[URL Rewrite]
# Redirect HTTP to HTTPS
^https?:\/\/(www.)?taobao\.com\/ https://taobao.com/ 302
^https?:\/\/(www.)?jd\.com\/ https://www.jd.com/ 302
^https?:\/\/(www.)?mi\.com\/ https://www.mi.com/ 302
^https?:\/\/you\.163\.com\/ https://you.163.com/ 302
^https?:\/\/(www.)?suning\.com\/ https://suning.com/ 302
^https?:\/\/(www.)?yhd\.com\/ https://yhd.com/ 302

# AbeamTV
^https?:\/\/api\.abema\.io\/v\d\/ip\/check - reject
# CUSTOM URL header

[Header Rewrite]
http-request ^https?:\/\/.*\.zhihu\.com\/(question|topic) header-replace User-Agent "osee2unifiedRelease/4432 osee2unifiedReleaseVersion/7.8.0 Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mo    bile/15E148"

# è¯¥æ®µä»…åœ¨ iOS ç‰ˆæœ¬ä¸‹ç”Ÿæ•ˆã€‚
# ä½ å¯ä»¥ä¸ºæŸäº›ç‰¹å®šçš„ WiFi ç½‘ç»œè®¾ç½®è®¾ç½®å‚æ•°
# å‚æ•°:
# suspend: "true" æˆ– "false"
# åœ¨è¯¥ç½‘ç»œä¸‹ Surge å°†æš‚åœå·¥ä½œã€‚ è¯·æ³¨æ„ï¼Œå¦‚æœä½ åœ¨è¯¥ç½‘ç»œä¸‹ç›´æ¥å¯åŠ¨ Surgeï¼Œé‚£ä¹ˆ
# Surge ä¾ç„¶ä¼šå·¥ä½œã€‚åªæœ‰å½“ä»å…¶ä»–ç½‘ç»œåˆ‡æ¢åˆ°è¯¥ç½‘ç»œæ—¶ï¼ŒSurge æ‰ä¼šæš‚åœã€‚
# 
# SSID Setting æ®µè¡¨è¾¾å¼ï¼ˆé€‚ç”¨ SUBNET è§„åˆ™ï¼‰
# å¯ä½¿ç”¨ MCCMNC:100-200 åŒ¹é…ç‰¹å®šæ•°æ®ç½‘ç»œ
# å¯ä½¿ç”¨ SSID:value ç‰¹å®šåŒ¹é… SSIDï¼Œæ”¯æŒé€šé…ç¬¦
# å¯ä½¿ç”¨ BSSID:value ç‰¹å®šåŒ¹é… BSSIDï¼Œæ”¯æŒé€šé…ç¬¦
# å¯ä½¿ç”¨ ROUTER:value ç‰¹å®šåŒ¹é…è·¯ç”±åœ°å€
# å¯ä½¿ç”¨ TYPE:WIFI åŒ¹é…æ‰€æœ‰ WiFi ç½‘ç»œ
# å¯ä½¿ç”¨ TYPE:CELLULAR åŒ¹é…æ‰€æœ‰æ•°æ®ç½‘ç»œ
# å¯ä½¿ç”¨ TYPE:WIRED åŒ¹é…æ‰€æœ‰æœ‰çº¿ç½‘ç»œï¼ˆiOS ä¸Šæ”¯æŒ USB ç½‘ç»œé€‚é…
# å‚æ•° cellular-fallback å¯å•ç‹¬æ§åˆ¶ä¸€äº› Wi-Fi ä¸‹çš„ all-hybrid å’Œ wifi-assist è¡Œä¸º
# cellular-fallback=default ä½¿ç”¨ [General] ä¸­çš„ all-hybrid å’Œ wifi-assist é…ç½®/
# cellular-fallback=off å…³é—­ all-hybrid å’Œ wifi-assist
# cellular-fallback=hybrid å¼€å¯ all-hybrid
# cellular-fallback=wifi-assist å¼€å¯ wifi-assist
# å¦‚æ— å‰ç¼€åˆ™æŒ‰ç…§æ—§ç‰ˆè§„åˆ™åŒ¹é… SSIDã€BSSIDã€è·¯ç”±åœ°å€
# SSID Setting æ®µå†…å®¹ä»ä¸Šè‡³ä¸‹ä¾æ¬¡åŒ¹é…ï¼ŒåŒ¹é…åˆ°ç¬¬ä¸€ä¸ªç»“æœåç«‹åˆ»ç»ˆæ­¢
# 
# ä¸­å›½ç”¨æˆ·è‹¥ä½¿ç”¨ TFO å»ºè®®å¼ºåˆ¶å…³é—­æ•°æ®ç½‘ç»œä¸Šçš„ TFOï¼Œé¿å…äº§ç”Ÿé—®é¢˜ï¼Œç„¶ååœ¨å·²æµ‹è¯•è¿‡çš„ç½‘ç»œä¸Šå¼ºåˆ¶å¼€å¯ã€‚åªæœ‰è¿™æ ·é…ç½®åæ–¹å¯å……åˆ†äº«å— TFO çš„ä¼˜åŠ¿ã€‚

[SSID Setting]
# Temporarily
"SSID Here" suspend=true
# TCP
"My Home" tfo-behaviour=force-enabled
TYPE:CELLULAR tfo-behaviour=force-disabled

[MITM]
# è·³è¿‡æœåŠ¡ç«¯è¯ä¹¦éªŒè¯
skip-server-cert-verify = true
# MITM over HTTP/2
// MITM over HTTP/2ï¼šä½¿ç”¨ HTTP/2 åè®®è¿›è¡Œ MITM è§£å¯†ï¼Œå¯åœ¨é«˜å¹¶å‘ä¸‹ä¼˜åŒ–æ€§èƒ½
h2 = true
# ä¸»æœºå
// Surge ä»…ä¼šè§£å¯†è¿™é‡ŒæŒ‡å®šçš„ä¸»æœºåçš„è¯·æ±‚ï¼Œios ç³»ç»Ÿå’ŒæŸäº›åº”ç”¨æœ‰ä¸¥æ ¼çš„å®‰å…¨ç­–ç•¥ï¼Œä»…ä¿¡ä»»æŸäº›ç‰¹å®šçš„è¯ä¹¦ï¼Œå¯¹è¿™äº›åŸŸåå¯åŠ¨è§£å¯†å¯èƒ½å¯¼è‡´é—®é¢˜ï¼Œå¦‚ *apple.com, *icloud.com.
# å¯ä½¿ç”¨é€šé…ç¬¦* å’Œï¼Ÿ
# å¯ä½¿ç”¨å‰ç¼€-å°†ç‰¹å®šä¸»æœºåæ’é™¤
# é»˜è®¤ä»…è§£å¯†å‘å¾€ 443 ç«¯å£çš„è¯·æ±‚
# å¯ä½¿ç”¨åç¼€ï¼šport è§£å¯†ç‰¹å®šç«¯å£
# å¯ä½¿ç”¨åç¼€ï¼š0è§£å¯†æ‰€æœ‰ç«¯å£
ca-passphrase = 64F05018
ca-p12 = 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
